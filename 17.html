<html>
  <head>
    <meta charset="utf-8" />
    <title>Pasar Rakyat Oro-oro Dowo</title>
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui"
    />

    <script src="aframe-master.js"></script>
    <script src="aframe-href-component.js"></script>

    <style>
      .popup-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.75);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        backdrop-filter: blur(4px);
        overflow-y: auto;
      }

      .popup-wrapper {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
        justify-content: center;
        width: fit-content;
        max-width: 90vw;
        max-height: 90vh;
        padding: 20px;
      }

      .popup-card-container {
        background: #ffffff;
        border-radius: 12px;
        padding: 18px;
        width: 420px;
        display: flex;
        flex-direction: column;
        gap: 12px;
        box-shadow: 0px 3px 10px rgba(0, 0, 0, 0.25);
      }

      .popup-title {
        font-size: 20px;
        font-weight: bold;
        text-align: center;
      }

      .popup-image {
        width: 100%;
        border-radius: 10px;
        display: block;
      }
    </style>
  </head>

  <body>
    <a-scene>
      <a-assets>
        <img id="logo" src="asset/Logo Toko.png" crossorigin="anonymous" />
      </a-assets>

      <!-- ==================== ICON TOKO MBAK DINI ==================== -->
      <a-image
        id="btn-dini"
        src="#logo"
        position="-9 0.5 -5"
        scale="5 5 5"
        rotation="0 180 0"
      >
      </a-image>

      <!-- CAMERA -->
      <a-entity position="0 1.8 4">
        <a-camera id="camera" look-controls wasd-controls-enabled="false">
          <a-ring
            radius-outer="0.30"
            radius-inner="0.20"
            position="0 0 -3"
            material="color: #C78CA0; shader: flat"
            cursor="fuse: true; maxDistance: 30"
            raycaster
          >
          </a-ring>
        </a-camera>
      </a-entity>

      <a-sky src="asset/17.JPG"></a-sky>
    </a-scene>

    <div id="popup-overlay" class="popup-overlay">
      <div id="popup-wrapper" class="popup-wrapper"></div>
    </div>

    <!-- ====================== SCRIPT ====================== -->
    <script>
      const popupOverlay = document.getElementById("popup-overlay");
      const popupWrapper = document.getElementById("popup-wrapper");

      //  ini script buat nampilin gambar popup
      function showPopup(imageList) {
        popupWrapper.innerHTML = "";

        imageList.forEach((imgSrc, index) => {
          let title =
            imageList.length === 1
              ? "Nama dan Detail Toko"
              : index === 0
              ? "Nama Toko"
              : "Detail Toko";

          // Container
          const card = document.createElement("div");
          card.className = "popup-card-container";

          card.innerHTML = `
            <div class="popup-title">${title}</div>
            <img class="popup-image" src="${imgSrc}">
          `;

          popupWrapper.appendChild(card);
        });

        popupOverlay.style.display = "flex";
      }

      // Ini buat nutup kalo klik overlay
      popupOverlay.addEventListener("click", (e) => {
        if (e.target === popupOverlay) {
          popupOverlay.style.display = "none";
        }
      });

      // MBAK DINI
      const btnDini = document.getElementById("btn-dini");
      //NANTI COPAS AJA DIBAWAHNYA SESUAI NAMA TOKONYA btn-dini nya ganti ID toko yang mau diklik

      btnDini.addEventListener("click", () => {
        showPopup([
          "asset/17_3_2.jpg", // Nama Toko
          "asset/17_3.jpg", // Detail Toko
        ]);
      });

      //nah yang ini jugaaa copas aja ganti assetnya gambar 1 buat nama toko gambar 2 detail toko, tp kalo mau diisi 1 bole
      // copasnya segini yaa
      // btnDini.addEventListener("click", () => {
      //   showPopup([
      //     "asset/17_3_2.jpg", // Nama Toko
      //     "asset/17_3.jpg"    // Detail Toko
      //   ]);
      // });
    </script>
  </body>
</html>
